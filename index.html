<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PersonaHire - 终极AI面试官</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="badge" id="modeBadge">🚀 GPT-4.1 + ElevenLabs TTS</div>
            <h1>🎭 PersonaHire Ultimate</h1>
            <p>顶级AI驱动的智能面试官 - 最强推理能力 + 真人语音</p>
        </div>

        <div class="api-setup" id="apiSetup" style="display: none;">
            <h3>🔑 API 配置 (开发者模式)</h3>
            <div class="api-row">
                <input type="password" id="openaiKey" placeholder="OpenAI API Key (sk-...)">
                <input type="password" id="elevenKey" placeholder="ElevenLabs API Key (可选)">
            </div>
            <button onclick="saveApiKeys()">保存配置</button>
            <small style="color: #666; display: block; margin-top: 16px;">
                💡 只有OpenAI Key是必需的。ElevenLabs Key可以获得更好的语音体验
            </small>
        </div>

        <div class="settings-panel">
            <h3>🎛️ 面试官设置</h3>
            <div class="voice-settings">
                <select id="interviewerStyle">
                    <option value="professional">专业严谨型</option>
                    <option value="friendly" selected>友好鼓励型</option>
                    <option value="pressure">压力测试型</option>
                    <option value="creative">创意开放型</option>
                </select>
                <select id="voiceStyle">
                    <option value="alloy">Alloy (中性)</option>
                    <option value="echo">Echo (男性)</option>
                    <option value="fable">Fable (英国口音)</option>
                    <option value="onyx">Onyx (深沉)</option>
                    <option value="nova" selected>Nova (女性)</option>
                    <option value="shimmer">Shimmer (柔和)</option>
                </select>
                <select id="difficulty">
                    <option value="beginner">初级难度</option>
                    <option value="intermediate" selected>中级难度</option>
                    <option value="advanced">高级难度</option>
                    <option value="expert">专家难度</option>
                </select>
            </div>
        </div>

        <div id="statusMessage" style="display: none;"></div>

        <div class="chat-area" id="chatArea">
            <div class="message interviewer">
                <strong>🎭 AI面试官 Sarah：</strong>
                <span id="welcomeMessage">
                欢迎来到PersonaHire Ultimate！我是您的专属AI面试官Sarah，搭载了最强大的GPT-4.1推理引擎和ElevenLabs语音技术。
                <br><br>
                我能够：
                <br>• 🧠 进行深度逻辑分析和追问
                <br>• 🎯 根据您的回答动态调整面试策略  
                <br>• 🗣️ 提供接近真人的语音交互体验
                <br>• 📊 生成专业的面试评估报告
                <br><br>
                请选择面试风格和难度，然后点击"开始面试"开始我们的专业面试！
                </span>
                <div class="voice-controls">
                    <button class="voice-btn" onclick="playWelcomeMessage()">🔊 听语音欢迎</button>
                </div>
            </div>
        </div>

        <div class="input-area">
            <textarea id="userInput" placeholder="在这里输入您的回答，或点击语音按钮说话..." disabled></textarea>
            <button class="send-btn" onclick="sendMessage()" id="sendBtn" disabled>
                📤 发送回答
            </button>
        </div>

        <div class="controls">
            <button onclick="startInterview()" id="startBtn">🎯 开始面试</button>
            <button onclick="generateReport()" id="reportBtn" disabled>📊 生成报告</button>
            <button onclick="endInterview()" id="endBtn" disabled>🏁 结束面试</button>
            <button onclick="clearChat()">🗑️ 清空对话</button>
        </div>

        <div class="loading" id="loading">
            <div class="audio-indicator" id="audioIndicator">🎵 正在生成语音...</div>
            🤖 AI面试官正在深度思考中...
        </div>
        
        <!-- 开发者模式入口 -->
        <div style="text-align: center; margin-top: 20px; padding: 20px;">
            <a href="?dev=true" style="color: #999; font-size: 12px; text-decoration: none;" id="devModeLink">
                🔧 开发者模式
            </a>
            <span style="color: #ccc; font-size: 12px; margin: 0 10px;">|</span>
            <a href="https://github.com/Kyle-Wang0211/PersonaHire-Ultimate" target="_blank" style="color: #999; font-size: 12px; text-decoration: none;">
                💻 查看源码
            </a>
        </div>
    </div>

    <!-- ✅ 正确的外部文件引用 -->
    <script src="js/config.js"></script>
    <script src="js/security.js"></script>
    <script src="js/tokenMonitoring.js"></script>
    <script src="js/main.js"></script>

    <!-- ❌ 已移除不存在的文件引用 -->
    <!-- <script src="js/audioManager.js"></script> -->
    <!-- <script src="js/interfaceManager.js"></script> -->
    <!-- <script src="js/apiManager.js"></script> -->
</body>
</html>